<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://kit.fontawesome.com/64d58efce2.js"
      crossorigin="anonymous"
    ></script>
    <link rel="icon" type="image/x-icon" href="chatbox/img/icon profil.png">
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="main.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Sign in & Sign up Form</title>
  </head>
  <body>
    
    @if (flashMessages.get('failedUser'))
        <div class="container sign-up-mode">
    @elseif(flashMessages.get('failedPassword'))
        <div class="container sign-up-mode">
    @else 
    <div class="container">
    @end
    
      <div class="forms-container">
        <div class="signin-signup">
            <form action="{{route('auth.register')}}" method="POST" class="sign-in-form">
            
            {{csrfField()}}

            <div class="registration-container">
              <button class="close-btn" onclick="closeForm()">&times;</button>
              <h2>Daftar</h2>

                @if(flashMessages.get('success'))
                    <div style="color: green; margin-bottom: 25px;">{{ flashMessages.get('success') }}</div>
                @endif
                @if(flashMessages.get('failed'))
                    <div style="color: red; margin-bottom: 25px;">{{flashMessages.get('failed')}}</div>
                @endif
                @if(flashMessages.get('error'))
                    <div style="color: red; margin-bottom: 25px;">{{flashMessages.get('error')}}</div>
                @endif

              <div class="input-wrapper">
                  <i class="fas fa-user"></i>
                  <input name="usernameRegister" type="text" id="username" placeholder=" " required>
                  <label>Nama Pengguna</label>
                  <span class="error-indicator" id="UsernameError">✖</span>
              </div>
              <div class="input-wrapper">
                  <i class="fas fa-envelope"></i>
                  <input name="emailRegister" type="email" id="email" placeholder=" " required>
                  <label>Email</label>
                  <span class="error-indicator" id="EmailError">✖</span>
              </div>
              <div class="input-wrapper">
                <i class="fas fa-lock"></i>
                <input name="passwordRegister" type="password" id="registerPassword" placeholder=" " required>
                <label>Kata Sandi</label>
                <span class="error-indicator" id="registerPasswordError">✖</span>
                <div class="eye-container toggle-password" id="toggleRegisterPassword">
                    <div class="eye" id="registerEye">
                        <svg viewBox="0 0 64 32" width="40" height="40">
                            <ellipse cx="32" cy="16" rx="30" ry="16" fill="white" stroke="black" stroke-width="2"/>
                            <circle cx="32" cy="16" r="10" fill="black" class="pupil" id="registerPupil"/>
                            <path d="M10 12 Q32 0, 54 12" fill="none" stroke="black" stroke-width="2"/>
                        </svg>
                    </div>
                </div>
            </div>
              <div class="password-reminder">
                  <p>Ingat Kata Sandi!</p>
              </div>
              <button type="submit" class="submit-btn">Daftar</button>
            </form>
              <div class="social-login">
                  <span>Daftar dengan media sosial:</span>
                  <div class="social-icons">
                    <a href="https://www.facebook.com" target="_blank" class="social-icon">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="https://www.twitter.com" target="_blank" class="social-icon">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="https://www.google.com" target="_blank" class="social-icon">
                        <i class="fab fa-google"></i>
                    </a>
                    <a href="https://www.linkedin.com" target="_blank" class="social-icon">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    
                </div>
              </div>
          </div>
         
          <form action="{{route('auth.login')}}" method="POST" class="sign-up-form">

            {{csrfField()}}

            <div class="login-container ">
              <button class="close-button" onclick="closeForm()">&times;</button>
              <h2>Masuk</h2>

                @if (flashMessages.get('failedPassword'))
                    <div style="color: red; margin-bottom: 25px;">{{ flashMessages.get('failedPassword') }}</div>
                @endif

                @if (flashMessages.get('failedUser'))
                    <div style="color: red; margin-bottom: 25px;">{{ flashMessages.get('failedUser') }}</div>
                @endif

              <div class="input-group">
                  <i class="fas fa-user"></i>
                  <input name="usernameLogin" type="text" id="username" placeholder=" " required>
                  <label>Nama Pengguna</label>
                 
              </div>
              <div class="input-group">
                  <i class="fas fa-lock"></i>
                  <input name="passwordLogin" type="password" id="password" placeholder=" " required>
                  <label>Kata Sandi</label>
                  <div class="eye-container toggle-password" id="togglePassword">
                    <div class="eye" id="eye">
                        <svg viewBox=" 0 0 64 32" width="40" height="40">
                            <ellipse cx="32" cy="16" rx="30" ry="16" fill="white" stroke="black" stroke-width="2"/>
                            <circle cx="32" cy="16" r="10" fill="black" class="pupil" id="pupil"/>
                            <path d="M10 12 Q32 0, 54 12" fill="none" stroke="black" stroke-width="2"/>
                        </svg>
                    </div>
                </div>
              </div>
              <div class="forgot-password">
                  <a href="">Lupa Kata Sandi?</a>
              </div>
              <button class="login-button" onclick="login()">Masuk</button>
              <!-- <div class="register-link">
                  Belum Punya Akun? <a href="#">Daftar</a>
              </div> -->
              <div class="social-login">
                <span>Masuk dengan media sosial:</span>
                <div class="social-icons">
                  <a href="https://www.facebook.com" target="_blank" class="social-icon">
                      <i class="fab fa-facebook-f"></i>
                  </a>
                  <a href="https://www.twitter.com" target="_blank" class="social-icon">
                      <i class="fab fa-twitter"></i>
                  </a>
                  <a href="https://www.google.com" target="_blank" class="social-icon">
                      <i class="fab fa-google"></i>
                  </a>
                  <a href="https://www.linkedin.com" target="_blank" class="social-icon">
                      <i class="fab fa-linkedin-in"></i>
                  </a>
                  
              </div>
          </div>
          </form>
        </div>
      </div>

      <div class="panels-container">
        <div class="panel1 left-panel">
          <div class="content">
            <h4>Sudah Punya Akun?</h4>
            <p style="font-size: 12px;">Jika Anda sudah terdaftar, yuk, klik di sini untuk masuk!</p>
            <button class="btn transparent1" id="sign-up-btn">
              Masuk
            </button>
          </div>
          <img src="img/mann-removebg-preview.png" class="image" alt="" width="100%" height="auto" />
        </div>
        <div class="panel right-panel">
          <div class="content">
            <h4 text-align="center">Belum Punya Akun ?</h4>
            <p style="font-size: 12px;">Buat akun sekarang untuk akses penuh ke layanan kami!</p>
            
            <button class="btn transparent" id="sign-in-btn">
              Daftar
            </button>
          </div>
          
          <img src="img/women.png" class="image" alt=""  />
        </div>
      </div>
      
    </div>

  <script>
    function login() {
        const username = document.getElementById('username');
        const password = document.getElementById('password');
        const usernameError = document.getElementById('usernameError');
        const passwordError = document.getElementById('passwordError');
        const pupil = document.getElementById('pupil');
        let valid = true;

        username.classList.remove('invalid');
        password.classList.remove('invalid');
        usernameError.style.display = 'none';
        passwordError.style.display = 'none';

        if (username.value === '') {
            username.classList.add('invalid');
            usernameError.style.display = 'inline';
            valid = false;
        }

        if (password.value === '') {
            password.classList.add('invalid');
            passwordError.style.display = 'inline';
            valid = false;
        }

        if (valid) {
            alert("Berhasil masuk!");
        }
    }

    function closeForm() {
        window.location.href = '{{route('home.index')}}';
    }

    const togglePassword = document.getElementById('togglePassword');
    const passwordInput = document.getElementById('password');
    const passwordError = document.getElementById('passwordError');
    const pupil = document.getElementById('pupil');
    const eye = document.getElementById('eye');

    passwordInput.addEventListener('input', function () {
        if (this.value) {
            passwordError.style.display = 'none';
            togglePassword.style.display = 'block';
            pupil.classList.remove('hidden'); // Tampilkan pupil
            eye.classList.remove('closed'); // Tampilkan bola mata terbuka
        } else {
            passwordError.style.display = 'none';
            togglePassword.style.display = 'none';
            pupil.classList.add('hidden'); // Sembunyikan pupil
            eye.classList.add('closed'); // Tampilkan bola mata tertutup
        }
    });

    togglePassword.addEventListener('click', function () {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);

        if (type === 'text') {
            pupil.classList.add('hidden'); // Sembunyikan pupil saat menunjukkan kata sandi
            eye.innerHTML = `
                <svg viewBox="0 0 64 32" width="40" height="40">
                    <ellipse cx="32" cy="16" rx="30" ry="16" fill="#999" stroke="black" stroke-width="2"/>
                    <path d="M10 12 Q32 0, 54 12" fill="none" stroke="black" stroke-width="2"/>
                    <path d="M18 14 L46 14" stroke="black" stroke-width="2"/> <!-- Tangan menutupi mata -->
                </svg>
            `;
        } else {
            pupil.classList.remove('hidden'); // Tampilkan pupil saat menyembunyikan kata sandi
            eye.innerHTML = `
                <svg viewBox="0 0 64 32" width="40" height="40">
                    <ellipse cx="32" cy="16" rx="30" ry="16" fill="white" stroke="black" stroke-width="2"/>
                    <circle cx="32" cy="16" r="10" fill="black" class="pupil" id="pupil"/>
                    <path d="M10 12 Q32 0, 54 12" fill="none" stroke="black" stroke-width="2"/>
                </svg>
            `;
        }
    });
//pelupil mata di login agar mengikuti kursor
    document.addEventListener('mousemove', function(e) {
        const eyeRect = togglePassword.getBoundingClientRect();
        const pupil = document.getElementById('pupil');
        const eyeCenter = {
            x: eyeRect.left + eyeRect.width / 2,
            y: eyeRect.top + eyeRect.height / 2
        };

        const pupilPosition = {
            x: e.clientX - eyeCenter.x,
            y: e.clientY - eyeCenter.y
        };

        const angle = Math.atan2(pupilPosition.y, pupilPosition.x);
        const distance = Math.min(Math.sqrt(pupilPosition.x**2 + pupilPosition.y**2), 10); // Jarak maksimum
        pupil.style.transform = `translate(${distance * Math.cos(angle)}px, ${distance * Math.sin(angle)}px)`;
    });
//pelupil mata di sign agar mengikuti kursor
document.addEventListener('mousemove', function(e) {
    const eyeRect = toggleRegisterPassword.getBoundingClientRect();
    const registerPupil = document.getElementById('registerPupil');
    const eyeCenter = {
        x: eyeRect.left + eyeRect.width / 2,
        y: eyeRect.top + eyeRect.height / 2
    };

    const pupilPosition = {
        x: e.clientX - eyeCenter.x,
        y: e.clientY - eyeCenter.y
    };

    const angle = Math.atan2(pupilPosition.y, pupilPosition.x);
    const distance = Math.min(Math.sqrt(pupilPosition.x**2 + pupilPosition.y**2), 10); // Jarak maksimum
    registerPupil.style.transform = `translate(${distance * Math.cos(angle)}px, ${distance * Math.sin(angle)}px)`;
});

    const toggleRegisterPassword = document.getElementById('toggleRegisterPassword');
const registerPasswordInput = document.getElementById('registerPassword');
const registerPasswordError = document.getElementById('registerPasswordError');
const registerPupil = document.getElementById('registerPupil');
const registerEye = document.getElementById('registerEye');

registerPasswordInput.addEventListener('input', function () {
    if (this.value) {
        registerPasswordError.style.display = 'none';
        toggleRegisterPassword.style.display = 'block';
        registerPupil.classList.remove('hidden');
        registerEye.classList.remove('closed');
    } else {
        registerPasswordError.style.display = 'none';
        toggleRegisterPassword.style.display = 'none';
        registerPupil.classList.add('hidden');
        registerEye.classList.add('closed');
    }
});

toggleRegisterPassword.addEventListener('click', function () {
    const type = registerPasswordInput.getAttribute('type') === 'password' ? 'text' : 'password';
    registerPasswordInput.setAttribute('type', type);

    if (type === 'text') {
        registerPupil.classList.add('hidden');
        registerEye.innerHTML = `
            <svg viewBox="0 0 64 32" width="40" height="40">
                <ellipse cx="32" cy="16" rx="30" ry="16" fill="#999" stroke="black" stroke-width="2"/>
                <path d="M10 12 Q32 0, 54 12" fill="none" stroke="black" stroke-width="2"/>
                <path d="M18 14 L46 14" stroke="black" stroke-width="2"/> <!-- Tangan menutupi mata -->
            </svg>
        `;
    } else {
        registerPupil.classList.remove('hidden');
        registerEye.innerHTML = `
            <svg viewBox="0 0 64 32" width="40" height="40">
                <ellipse cx="32" cy="16" rx="30" ry="16" fill="white" stroke="black" stroke-width="2"/>
                <circle cx="32" cy="16" r="10" fill="black" class="pupil" id="registerPupil"/>
                <path d="M10 12 Q32 0, 54 12" fill="none" stroke="black" stroke-width="2"/>
            </svg>
        `;
    }
});

</script>


    <script src="app.js"></script>
  </body>
</html>
